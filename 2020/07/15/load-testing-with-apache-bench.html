<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>Quick and simple load testing with Apache Bench</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Quick and simple load testing with Apache Bench" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A brief into to Apache Bench, how to use, available option and result interpretation" /> <meta property="og:description" content="A brief into to Apache Bench, how to use, available option and result interpretation" /> <link rel="canonical" href="https://diamantidis.github.io/2020/07/15/load-testing-with-apache-bench" /> <meta property="og:url" content="https://diamantidis.github.io/2020/07/15/load-testing-with-apache-bench" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/social/load-testing-with-apache-bench.png" /> <meta property="og:image:height" content="512" /> <meta property="og:image:width" content="1024" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-07-15T04:00:00+00:00" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/social/load-testing-with-apache-bench.png" /> <meta property="twitter:title" content="Quick and simple load testing with Apache Bench" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2020-07-15T04:00:00+00:00","datePublished":"2020-07-15T04:00:00+00:00","description":"A brief into to Apache Bench, how to use, available option and result interpretation","headline":"Quick and simple load testing with Apache Bench","image":{"width":1024,"height":512,"url":"https://diamantidis.github.io/assets/social/load-testing-with-apache-bench.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2020/07/15/load-testing-with-apache-bench"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2020/07/15/load-testing-with-apache-bench"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper">
<div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div>
<nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"> <span class="menu-icon"> <svg viewbox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a>
</div> </nav>
</div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">Quick and simple load testing with Apache Bench</span> </h1> <div class="post-subheader"> <span class="post-date"> July 15, 2020 </span> <span class="post-divider">-</span> <span class="post-minutes"> 4 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Performance" title="Performance">Performance</a> </div> </div> </div> </header> <div class="post-content"> <p><a href="https://httpd.apache.org/docs/2.4/programs/ab.html">Apache Bench</a> or ab for short, is a command-line tool to perform simple load tests on an HTTP server, be it a website or an API.</p> <p>By running the following command, you will get an overview of how the server is performing under load:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ab <span class="nt">-n</span> 100 <span class="nt">-c</span> 10 &lt;url&gt;
</code></pre></div></div> <p>So, in this post, I will try to explain how we can use Apache Bench. I will start with how to install it, then proceed on how to use it and the available options, and finally, I explain how to interpret the results.</p> <p>Let’s get started!</p> <h2 id="installation">Installation</h2> <p>One of the advantages of Apache Bench is that you may already have <code class="language-plaintext highlighter-rouge">ab</code> installed, depending on the OS you are using. For macOS users, it comes pre-installed by default, and if you are using a Linux Distribution, there are a lot of chances that it is also installed as it comes with the <code class="language-plaintext highlighter-rouge">httpd</code> package. Try to run <code class="language-plaintext highlighter-rouge">ab -help</code> to verify if that’s the case.</p> <p>In case it is not installed, you will need to install the <code class="language-plaintext highlighter-rouge">apache2-utils</code> package. For example, if you are using <code class="language-plaintext highlighter-rouge">Ubuntu</code> you will have to run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get update
apt-get <span class="nb">install </span>apache2-utils
</code></pre></div></div> <p>So, now, that we have Apache Bench installed, let’s see how we can use it and some of the available options.</p> <h2 id="usage">Usage</h2> <p>The simplest possible way to use Apache Bench is by running <code class="language-plaintext highlighter-rouge">ab &lt;url&gt;</code>. This command will perform a single network request, but this is not exactly what we would call “load”. For this reason, Apache Bench comes with a plethora of options you can use to define more complex use cases.</p> <p>Some of the most useful ones are the following:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">-n</code>: Number of requests</li> <li>
<code class="language-plaintext highlighter-rouge">-c</code>: Number of concurrent requests</li> <li>
<code class="language-plaintext highlighter-rouge">-H</code>: Add header</li> <li>
<code class="language-plaintext highlighter-rouge">—r</code>: flag to not exit on socket receive errors</li> <li>
<code class="language-plaintext highlighter-rouge">-k</code>: Use HTTP KeepAlive feature</li> <li>
<code class="language-plaintext highlighter-rouge">-p</code>: File containing data to POST</li> <li>
<code class="language-plaintext highlighter-rouge">-T</code>: Content-type header to use for POST/PUT data,</li> </ul> <p>Now you can use those options like so:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ab <span class="nt">-n</span> 100 <span class="nt">-c</span> 10 <span class="nt">-H</span> <span class="s2">"Accept-Encoding: gzip, deflate"</span> <span class="nt">-rk</span> https://0.0.0.0:4000/
</code></pre></div></div> <blockquote> <p><img class="emoji" title=":warning:" alt=":warning:" src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png" height="20" width="20"> Please note that you need the trailing <code class="language-plaintext highlighter-rouge">/</code> on the URL, or else you will get the error message <code class="language-plaintext highlighter-rouge">ab: invalid URL</code>.</p> </blockquote> <p>If you want to perform a benchmark test for a POST request, you can run the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ab <span class="nt">-n</span> 100 <span class="nt">-c</span> 10 <span class="nt">-p</span> data.json <span class="nt">-T</span> application/json <span class="nt">-rk</span> https://0.0.0.0:4000/
</code></pre></div></div> <blockquote> <p><img class="emoji" title=":bulb:" alt=":bulb:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png" height="20" width="20"> TIP: For a full list of options, you can run <code class="language-plaintext highlighter-rouge">ab -help</code>, refer the man page by running <code class="language-plaintext highlighter-rouge">man ab</code>, or visit the <a href="https://httpd.apache.org/docs/2.4/programs/ab.html">documentation</a> online.</p> </blockquote> <p>Let’s now see how the output would look like and how to interpret it!</p> <h2 id="response-interpretation">Response interpretation</h2> <p>Once <code class="language-plaintext highlighter-rouge">ab</code> completes the HTTP requests, it will generate an output that will look like the following snippet:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Concurrency Level:      10
Time taken for tests:   0.791 seconds
Complete requests:      1000
Failed requests:        0
Keep-Alive requests:    1000
Total transferred:      4649081 bytes
HTML transferred:       3934000 bytes
Requests per second:    1264.17 [#/sec] (mean)
Time per request:       7.910 [ms] (mean)
Time per request:       0.791 [ms] (mean, across all concurrent requests)
Transfer rate:          5739.47 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   9.4      0     105
Processing:     3    6   7.1      5      77
Waiting:        3    6   6.8      5      65
Total:          3    7  11.9      5     111

Percentage of the requests served within a certain time (ms)
  50%      5
  66%      6
  75%      6
  80%      6
  90%      7
  95%      8
  98%     62
  99%     77
 100%    111 (longest request)
</code></pre></div></div> <p>In this first section, you can find some useful information like, for example, that the number of <code class="language-plaintext highlighter-rouge">Complete requests</code> was 1000 and the <code class="language-plaintext highlighter-rouge">Concurrency Level</code> was 10. Furthermore, you can see that it performed 1264.17 <code class="language-plaintext highlighter-rouge">Requests per second</code>.</p> <p>In the <code class="language-plaintext highlighter-rouge">Connection Times</code> section, you can see that the fastest request took 3 ms (<code class="language-plaintext highlighter-rouge">Total</code> row and <code class="language-plaintext highlighter-rouge">min</code> column), the slowest took 111 ms (<code class="language-plaintext highlighter-rouge">Total</code> row and <code class="language-plaintext highlighter-rouge">max</code> column), while the mean was 7 ms (<code class="language-plaintext highlighter-rouge">Total</code> row &amp; <code class="language-plaintext highlighter-rouge">mean</code> column).</p> <p>In the last section, you get an overview of the response times in a cumulative distribution. In this example, we can see that 95% of requests took 8 ms or less to complete and that total response times of more than 100 ms is an outlier as it covers less than 1% of the sample.</p> <h2 id="conclusion">Conclusion</h2> <p>And that’s about for this intro on Apache Bench! By now, you should be able to use the <code class="language-plaintext highlighter-rouge">ab</code> command to perform load tests on an HTTP server and get some insights from the results.</p> <p>In the end, I would say that Apache Bench is an ideal solution if you want to perform a quick load test since it is probably already installed on your machine and it is really simple to use. In case you want to cover more advanced use cases like flows and random URL entries, then I think that there are other more modern and feature-complete tools. A few examples are <a href="https://jmeter.apache.org/">JMeter</a>, <a href="https://k6.io/">K6</a> and <a href="https://gatling.io/">Gatling</a>.</p> <p>Thanks for reading, I hope that you find this post useful, and if you have any questions or comments about this post, feel free to reach out to me on <a href="https://twitter.com/diamantidis_io">Twitter</a>!</p> <p>Until next time!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"> </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=Quick+and+simple+load+testing+with+Apache+Bench&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F15%2Fload-testing-with-apache-bench" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=Quick+and+simple+load+testing+with+Apache+Bench&amp;u=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F15%2Fload-testing-with-apache-bench" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F15%2Fload-testing-with-apache-bench" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
