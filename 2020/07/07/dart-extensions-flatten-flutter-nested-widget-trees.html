<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>Dart extensions to flatten Flutter's deep nested widget trees</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Dart extensions to flatten Flutter’s deep nested widget trees" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="How to use Dart extensions instead of nested widgets to flatten the widget tree in a Flutter project" /> <meta property="og:description" content="How to use Dart extensions instead of nested widgets to flatten the widget tree in a Flutter project" /> <link rel="canonical" href="https://diamantidis.github.io/2020/07/07/dart-extensions-flatten-flutter-nested-widget-trees" /> <meta property="og:url" content="https://diamantidis.github.io/2020/07/07/dart-extensions-flatten-flutter-nested-widget-trees" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/social/dart-extension-flutter-widget.png" /> <meta property="og:image:height" content="512" /> <meta property="og:image:width" content="1024" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-07-07T04:00:00+00:00" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/social/dart-extension-flutter-widget.png" /> <meta property="twitter:title" content="Dart extensions to flatten Flutter’s deep nested widget trees" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2020-07-07T04:00:00+00:00","datePublished":"2020-07-07T04:00:00+00:00","description":"How to use Dart extensions instead of nested widgets to flatten the widget tree in a Flutter project","headline":"Dart extensions to flatten Flutter’s deep nested widget trees","image":{"width":1024,"height":512,"url":"https://diamantidis.github.io/assets/social/dart-extension-flutter-widget.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2020/07/07/dart-extensions-flatten-flutter-nested-widget-trees"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2020/07/07/dart-extensions-flatten-flutter-nested-widget-trees"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper"><div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div><nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger" /> <label for="nav-trigger"> <span class="menu-icon"> <svg viewBox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" /> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a></div> </nav></div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">Dart extensions to flatten Flutter&#39;s deep nested widget trees</span> </h1> <div class="post-subheader"> <span class="post-date"> July 7, 2020 </span> <span class="post-divider">-</span> <span class="post-minutes"> 4 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Flutter" title="Flutter">Flutter</a> <a class="post-tag" href="/tags#Dart" title="Dart">Dart</a> </div> </div> </div> </header> <div class="post-content"> <p>In version 2.7, <code class="language-plaintext highlighter-rouge">Dart</code> introduced extensions to allow developers to add further functionality to an existing component. Extensions can be a great tool in our toolkit when we write business logic, but they can also be as useful in other areas! One such example can be the way we construct the widgets.</p> <p>Coming from an iOS background and inspired by SwiftUI’s ViewModifiers, I was intrigued to use the Dart extensions in a similar fashion to reduce the visual clutter that comes with the deep tree of many nested widgets.</p> <p>Let’s see an example!</p> <h2 id="with-nested-widgets">With nested widgets</h2> <p>Here we have the default widget created on <a href="https://dartpad.dev/flutter">dartpad.dev</a>, where we also wrapped the text inside a <code class="language-plaintext highlighter-rouge">Padding</code> widget.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyWidget</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span>
      <span class="n">Padding</span><span class="o">(</span>
        <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mi">16</span><span class="o">),</span>
        <span class="nl">child:</span> <span class="n">Text</span><span class="o">(</span><span class="s">'Hello, World!'</span><span class="o">,</span> <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">textTheme</span><span class="o">.</span><span class="na">headline4</span><span class="o">)</span>
      <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Now, let’s see how we can accomplish the same with the help of Dart extensions.</p> <h2 id="with-extensions-methods">With extensions methods</h2> <p>First, we will introduce an extension on <code class="language-plaintext highlighter-rouge">Widget</code> that will wrap the caller with a padding <code class="language-plaintext highlighter-rouge">Widget</code>:</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">extension</span> <span class="n">WidgetModifier</span> <span class="n">on</span> <span class="n">Widget</span> <span class="o">{</span>
  <span class="n">Widget</span> <span class="n">padding</span><span class="o">([</span><span class="n">EdgeInsetsGeometry</span> <span class="n">value</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mi">16</span><span class="o">)])</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Padding</span><span class="o">(</span>
      <span class="nl">padding:</span> <span class="n">value</span><span class="o">,</span>
      <span class="nl">child:</span> <span class="k">this</span><span class="o">,</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>With this extension in place, we could turn our <code class="language-plaintext highlighter-rouge">Widget</code> to the following:</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyWidget</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Text</span><span class="o">(</span><span class="s">'Hello, World!'</span><span class="o">,</span> <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">textTheme</span><span class="o">.</span><span class="na">headline4</span><span class="o">)</span>
            <span class="o">.</span><span class="na">padding</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>This example is just a small one, but I hope you get the picture!!</p> <p>We are using the extension method as a syntactic sugar to structure our layout, instead of wrapping a widget inside another one.</p> <p>Similarly, we can add more functions to our extension and create more complex user interfaces:</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">extension</span> <span class="n">WidgetModifier</span> <span class="n">on</span> <span class="n">Widget</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="n">Widget</span> <span class="n">background</span><span class="o">(</span><span class="n">Color</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">DecoratedBox</span><span class="o">(</span>
      <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="o">(</span>
        <span class="nl">color:</span> <span class="n">color</span><span class="o">,</span>
      <span class="o">),</span>
      <span class="nl">child:</span> <span class="k">this</span><span class="o">,</span>
    <span class="o">);</span>
  <span class="o">}</span>

  <span class="n">Widget</span> <span class="n">cornerRadius</span><span class="o">(</span><span class="n">BorderRadiusGeometry</span> <span class="n">radius</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ClipRRect</span><span class="o">(</span>
      <span class="nl">borderRadius:</span> <span class="n">radius</span><span class="o">,</span>
      <span class="nl">child:</span> <span class="k">this</span><span class="o">,</span>
    <span class="o">);</span>
  <span class="o">}</span>

  <span class="n">Widget</span> <span class="n">align</span><span class="o">([</span><span class="n">AlignmentGeometry</span> <span class="n">alignment</span> <span class="o">=</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">center</span><span class="o">])</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Align</span><span class="o">(</span>
      <span class="nl">alignment:</span> <span class="n">alignment</span><span class="o">,</span>
      <span class="nl">child:</span> <span class="k">this</span><span class="o">,</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyWidget</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Text</span><span class="o">(</span><span class="s">'Hello, World!'</span><span class="o">,</span> <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">textTheme</span><span class="o">.</span><span class="na">headline4</span><span class="o">)</span>
            <span class="o">.</span><span class="na">padding</span><span class="o">()</span>
            <span class="o">.</span><span class="na">background</span><span class="o">(</span><span class="n">Colors</span><span class="o">.</span><span class="na">lightBlue</span><span class="o">)</span>
            <span class="o">.</span><span class="na">cornerRadius</span><span class="o">(</span><span class="n">BorderRadius</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="n">Radius</span><span class="o">.</span><span class="na">circular</span><span class="o">(</span><span class="mf">8.0</span><span class="o">)))</span>
            <span class="o">.</span><span class="na">padding</span><span class="o">(</span><span class="n">EdgeInsets</span><span class="o">.</span><span class="na">symmetric</span><span class="o">(</span><span class="nl">horizontal:</span> <span class="mi">8</span><span class="o">,</span> <span class="nl">vertical:</span> <span class="mi">16</span><span class="o">))</span>
            <span class="o">.</span><span class="na">background</span><span class="o">(</span><span class="n">Colors</span><span class="o">.</span><span class="na">purple</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><img src="https://diamantidis.github.io/assets/dart_extensions/dart_widget_extensions_example.png" alt="Dart widget extensions example screenshot" /></p> <p>Isn’t that great? We now have a clean and elegant widget that we can easily understand! Imagine how many levels of nested widgets you would have to use to recreate this layout without the help of extensions.</p> <h2 id="wrap-up">Wrap-up</h2> <p>To wrap up, in this post, we have followed an alternative approach on how to structure a widget tree in a Flutter project, by applying a concept similar to SwiftUI’s ViewModifiers.</p> <p>As a result, this could help us flatten the widget hierarchy and reduce nesting. I have showcased a few examples of such extensions, but you can use the same concept in many other cases as you see fit.</p> <p>Thanks for reading, I hope you find this post useful!</p> <p>If you have any questions or comments about this post, feel free to reach out to me on <a href="https://twitter.com/diamantidis_io">Twitter</a>!</p> <p>Until next time!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" > </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=Dart+extensions+to+flatten+Flutter%27s+deep+nested+widget+trees&url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F07%2Fdart-extensions-flatten-flutter-nested-widget-trees" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=Dart+extensions+to+flatten+Flutter%27s+deep+nested+widget+trees&u=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F07%2Fdart-extensions-flatten-flutter-nested-widget-trees" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F07%2F07%2Fdart-extensions-flatten-flutter-nested-widget-trees" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
