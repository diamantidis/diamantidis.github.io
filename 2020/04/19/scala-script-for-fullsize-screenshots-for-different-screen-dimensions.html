<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>A Scala script to take full size webpage screenshots for different screen dimensions</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="A Scala script to take full size webpage screenshots for different screen dimensions" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A post on how to use Selenium on a Scala sbt project to take fullpage screenshots of a website in different screen sizes" /> <meta property="og:description" content="A post on how to use Selenium on a Scala sbt project to take fullpage screenshots of a website in different screen sizes" /> <link rel="canonical" href="https://diamantidis.github.io/2020/04/19/scala-script-for-fullsize-screenshots-for-different-screen-dimensions" /> <meta property="og:url" content="https://diamantidis.github.io/2020/04/19/scala-script-for-fullsize-screenshots-for-different-screen-dimensions" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-04-19T04:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="twitter:title" content="A Scala script to take full size webpage screenshots for different screen dimensions" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2020-04-19T04:00:00+00:00","datePublished":"2020-04-19T04:00:00+00:00","description":"A post on how to use Selenium on a Scala sbt project to take fullpage screenshots of a website in different screen sizes","headline":"A Scala script to take full size webpage screenshots for different screen dimensions","image":"https://diamantidis.github.io/assets/socialIcon.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2020/04/19/scala-script-for-fullsize-screenshots-for-different-screen-dimensions"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2020/04/19/scala-script-for-fullsize-screenshots-for-different-screen-dimensions"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper">
<div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div>
<nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"> <span class="menu-icon"> <svg viewbox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a>
</div> </nav>
</div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">A Scala script to take full size webpage screenshots for different screen dimensions</span> </h1> <div class="post-subheader"> <span class="post-date"> April 19, 2020 </span> <span class="post-divider">-</span> <span class="post-minutes"> 8 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Scala" title="Scala">Scala</a> <a class="post-tag" href="/tags#Selenium" title="Selenium">Selenium</a> </div> </div> </div> </header> <div class="post-content"> <p>Today, I had yet another usual Sunday morning. Drinking my tea, doing some UI experiments on this blog and using <a href="https://developers.google.com/web/tools/chrome-devtools">Chrome’s DevTools</a> and the <a href="https://developers.google.com/web/tools/chrome-devtools/device-mode">Device Mode</a> to make sure that those changes won’t break the website in different screen dimensions. <img class="emoji" title=":joy:" alt=":joy:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png" height="20" width="20"></p> <p>Until the moment I found that Chrome DevTools has an option to capture full size screenshots!!</p> <p><img src="https://diamantidis.github.io/assets/screenshot_script/devTools_capture_screenshot.png" alt="Chrome's DevTool capture full size screenshots screenshot"></p> <p>My first thought was that this is great, I could use it to track the evolution of the UI on my blog over time. A second later though, a light bulb went on in my head. <img class="emoji" title=":bulb:" alt=":bulb:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png" height="20" width="20"></p> <p>What if I could write a script that would do the same? This would not only help me keep a record of the UI changes over time but potentially could ease the tedious and inefficient process of changing devices and making sure that everything looks good. <img class="emoji" title=":thinking:" alt=":thinking:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f914.png" height="20" width="20"> <img class="emoji" title=":thought_balloon:" alt=":thought_balloon:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ad.png" height="20" width="20"></p> <p>The idea is to create a script that would open a webpage and then simulate me changing the screen devices and dimensions on Chrome DevTools. After that, this script would take screenshots for all these dimensions and store them on the local filesystem (or remote). Finally, I would just have to browse though the images and review them to make sure that everything looks as expected.</p> <p>And that’s basically the topic of this post. Now that I have the idea, it’s time to start implementing it, right? But in which programming language?</p> <h2 id="the-language-decision">The language decision</h2> <p>I decided to go with <a href="https://www.scala-lang.org/">Scala</a>.</p> <p>A few years ago, I was working on a project using Scala and I had a really good experience, though certain circumstances didn’t make it possible to dig deeper and get more accustomed to language features like functional programming and its ecosystem.</p> <p>Scala integrates seamlessly features of object-oriented and functional languages, is a type-safe language that uses type inference, and provides syntactic sugar for a lot of use cases such as pattern matching, for-comprehension and case classes.</p> <p>All of these result in a language with concise syntax and expressiveness. On top of that, it runs on a JVM and because it supports compatibility and interoperability with Java, it allows to use most of the Java libraries.</p> <p>And though it’s been a while since the last time I worked with Scala, I think that writing this script in Scala, would be a great opportunity to refresh my Scala knowledge and slowly learn to write more intuitive Scala programs.</p> <h2 id="implementation">Implementation</h2> <p>Let’s start with the implementation</p> <p>First thing first, to run this script, you are going to need <a href="https://www.scala-lang.org/">Scala</a> and <a href="https://www.scala-sbt.org/">sbt</a>. You can refer to <a href="https://www.scala-lang.org/download/">Scala documentation</a> to find more information on how to set up both of them.</p> <blockquote> <p>This script is built and run with the following versions:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">java -version</code>: 1.8.0_172</li> <li>
<code class="language-plaintext highlighter-rouge">sbt sbtVersion</code>: 1.3.9</li> </ul> </blockquote> <p>To create a new sbt project, just run <code class="language-plaintext highlighter-rouge">sbt new scala/hello-world.g8</code>. At some point, you will be asked to enter the name of the application. In my case, I have used <code class="language-plaintext highlighter-rouge">scala-screenshots</code>.</p> <p>After this script is completed, the created project will have the following folder structure:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala-screenshots
├── build.sbt
├── project
│   ├── build.properties
│   └── target
├── src
│   └── main
│       └── scala
│           └── Main.scala
└── target
</code></pre></div></div> <p>Starting from the top, <code class="language-plaintext highlighter-rouge">build.sbt</code> is the file where we set the information about the project, like name, version and dependencies.</p> <p>So, let’s open this file and add the dependencies we will need. We are going to use <a href="https://www.selenium.dev/">Selenium</a> to open the webpage and capture the screenshot and <a href="http://commons.apache.org/proper/commons-io/">Commons IO</a> to save the screenshot to a file. Based on that, <code class="language-plaintext highlighter-rouge">build.sbt</code> should look similar to the following snippet:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.13.1"</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">"scala-screenshots"</span>
<span class="n">organization</span> <span class="o">:=</span> <span class="s">"io.github.diamantidis"</span>
<span class="n">version</span> <span class="o">:=</span> <span class="s">"1.0"</span>

<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.seleniumhq.selenium"</span> <span class="o">%</span> <span class="s">"selenium-java"</span> <span class="o">%</span> <span class="s">"3.14.0"</span>
<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"commons-io"</span> <span class="o">%</span> <span class="s">"commons-io"</span> <span class="o">%</span> <span class="s">"2.6"</span>
</code></pre></div></div> <p>Next, we are going to need a WebDriver for Selenium. You can refer to Selenium website’s <a href="https://www.selenium.dev/ecosystem/">page about supported Browser Drivers</a> to find which of the supported one you would like to use.</p> <p>In my example I am going to use <a href="https://sites.google.com/a/chromium.org/chromedriver/">ChromeDriver</a>, so make sure that you download it and place it in the root directory of our project.</p> <blockquote> <p>You may get some security warning on the first run of the script, so make sure to allow the use of <code class="language-plaintext highlighter-rouge">chromedriver</code>.</p> </blockquote> <p><img src="https://diamantidis.github.io/assets/screenshot_script/chromedriver_alert.png" alt="ChromeDriver security warning screenshot"></p> <p>Now we can open our <code class="language-plaintext highlighter-rouge">Main.scala</code> file and start building our program.</p> <p>By default the content of the file is the following:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">Main</span> <span class="k">extends</span> <span class="nc">App</span> <span class="o">{</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"Hello, World!"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div> <p>You could either use your favourite IDE to run this or you could open the command line, navigate to the root directory of the project and execute <code class="language-plaintext highlighter-rouge">sbt run</code>.</p> <p>In both cases you should the “Hello, World!” message.</p> <p>Let’s remove the body part of this object and instead add some variables for the dimensions and the url that we are interested in:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">case</span> <span class="k">class</span> <span class="nc">ScreenDimension</span><span class="o">(</span><span class="n">width</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">height</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>

  <span class="c1">// Define dimensions and urls</span>
  <span class="k">val</span> <span class="nv">dimensions</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span>
    <span class="nc">ScreenDimension</span><span class="o">(</span><span class="mi">1920</span><span class="o">,</span> <span class="mi">1080</span><span class="o">),</span> <span class="c1">// Laptop</span>
    <span class="nc">ScreenDimension</span><span class="o">(</span><span class="mi">414</span><span class="o">,</span> <span class="mi">896</span><span class="o">)</span> <span class="c1">// iPhone XR</span>
  <span class="o">)</span>

  <span class="k">val</span> <span class="nv">Host</span> <span class="k">=</span> <span class="s">"https://diamantidis.github.io"</span>
  <span class="k">val</span> <span class="nv">url</span> <span class="k">=</span> <span class="n">s</span><span class="s">"${Host}/2020/04/19/scala-script-for-fullsize-screenshots-for-different-screen-dimensions"</span>

  <span class="c1">// rest of the code goes here</span>
</code></pre></div></div> <p>Next, we are going to setup the WebDriver using the following lines:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">val</span> <span class="nv">options</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ChromeOptions</span><span class="o">()</span>
  <span class="nv">options</span><span class="o">.</span><span class="py">addArguments</span><span class="o">(</span><span class="s">"headless"</span><span class="o">)</span>
  <span class="k">val</span> <span class="nv">webDriver</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ChromeDriver</span><span class="o">(</span><span class="n">options</span><span class="o">)</span>

  <span class="c1">// rest of the code goes here</span>
</code></pre></div></div> <blockquote> <p>We could use some other WebDriver, by replacing those lines. For example, for Safari we could use:</p> <div class="language-scala highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>  <span class="k">val</span> <span class="nv">webDriver</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SafariDriver</span><span class="o">()</span>
</code></pre></div> </div> </blockquote> <p>After that, I will compute the directory where the screenshots will be saved.</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">val</span> <span class="nv">calendar</span> <span class="k">=</span> <span class="nv">Calendar</span><span class="o">.</span><span class="py">getInstance</span><span class="o">()</span>
  <span class="k">val</span> <span class="nv">baseDir</span> <span class="k">=</span> <span class="s">"./screenshots"</span>
  <span class="k">val</span> <span class="nv">day</span> <span class="k">=</span> <span class="s">"%02d"</span><span class="o">.</span><span class="py">format</span><span class="o">(</span><span class="nv">calendar</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">Calendar</span><span class="o">.</span><span class="py">DATE</span><span class="o">))</span>
  <span class="k">val</span> <span class="nv">month</span> <span class="k">=</span> <span class="s">"%02d"</span><span class="o">.</span><span class="py">format</span><span class="o">(</span><span class="nv">calendar</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">Calendar</span><span class="o">.</span><span class="py">MONTH</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
  <span class="k">val</span> <span class="nv">year</span> <span class="k">=</span> <span class="nv">calendar</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="nv">Calendar</span><span class="o">.</span><span class="py">YEAR</span><span class="o">)</span>

  <span class="k">val</span> <span class="nv">directory</span> <span class="k">=</span> <span class="n">s</span><span class="s">"$baseDir/$year-$month-$day"</span>

  <span class="c1">// rest of the code goes here</span>
</code></pre></div></div> <p>Here, I am use the current date so that screenshots don’t override screenshots from previous changes.</p> <p>After that, I will compute the name of the file where we will save the screenshot:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">val</span> <span class="nv">filename</span> <span class="k">=</span> <span class="nv">url</span><span class="o">.</span><span class="py">replace</span><span class="o">(</span><span class="nc">Host</span><span class="o">,</span> <span class="s">""</span><span class="o">)</span>
    <span class="o">.</span><span class="py">toLowerCase</span><span class="o">()</span>
    <span class="o">.</span><span class="py">replaceAll</span><span class="o">(</span><span class="s">"^/+"</span><span class="o">,</span> <span class="s">""</span><span class="o">)</span> <span class="c1">// trim leading '/'</span>
    <span class="o">.</span><span class="py">replaceAll</span><span class="o">(</span><span class="s">"/+$"</span><span class="o">,</span> <span class="s">""</span><span class="o">)</span> <span class="c1">// trim trailing '/'</span>
    <span class="o">.</span><span class="py">replaceAll</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="s">"-"</span><span class="o">)</span> <span class="c1">// replace '/' with '-'</span>
    <span class="o">.</span><span class="py">replaceAll</span><span class="o">(</span><span class="s">"^$"</span><span class="o">,</span> <span class="s">"homepage"</span><span class="o">)</span> <span class="c1">// if it's empty string, then it's the home page</span>

  <span class="c1">//  rest of the code goes here</span>
</code></pre></div></div> <p>Now, we can open the webpage and set the screen dimension like in the following screen:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">webDriver</span><span class="o">.</span><span class="py">get</span><span class="o">(</span><span class="n">url</span><span class="o">)</span>
  <span class="nv">Thread</span><span class="o">.</span><span class="py">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>

  <span class="nv">dimensions</span><span class="o">.</span><span class="py">foreach</span> <span class="o">{</span> <span class="n">dimension</span> <span class="k">=&gt;</span>
    <span class="k">val</span> <span class="nv">width</span> <span class="k">=</span> <span class="nv">dimension</span><span class="o">.</span><span class="py">width</span>
    <span class="k">val</span> <span class="nv">originalHeight</span> <span class="k">=</span> <span class="nv">dimension</span><span class="o">.</span><span class="py">height</span>

    <span class="k">val</span> <span class="nv">originalDimension</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="n">width</span><span class="o">,</span> <span class="n">originalHeight</span><span class="o">)</span>
    <span class="nv">webDriver</span><span class="o">.</span><span class="py">manage</span><span class="o">.</span><span class="py">window</span><span class="o">.</span><span class="py">setSize</span><span class="o">(</span><span class="n">originalDimension</span><span class="o">)</span>

    <span class="c1">// rest of the code goes here</span>
  <span class="o">}</span>

  <span class="nv">webDriver</span><span class="o">.</span><span class="py">quit</span><span class="o">()</span>
</code></pre></div></div> <p>In this snippet, we open the page once, wait half a second to load, and then iterate over the dimensions and update the window size with each dimension. Also note that it’s important to call <code class="language-plaintext highlighter-rouge">quit()</code> to close all windows, and exit the driver.</p> <p>Though the above-mentioned snippet will set the dimensions for the window, we won’t be able to get the full size screenshot for the pages that have a height greater than the height we set when defining the dimensions. To fix this problem we are going to get the height of the body of the webpage and update the height of the window to match this value.</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">val</span> <span class="nv">body</span> <span class="k">=</span> <span class="nv">webDriver</span><span class="o">.</span><span class="py">findElementByTagName</span><span class="o">(</span><span class="s">"body"</span><span class="o">)</span>
    <span class="k">val</span> <span class="nv">height</span> <span class="k">=</span> <span class="nv">body</span><span class="o">.</span><span class="py">getSize</span><span class="o">.</span><span class="py">height</span>

    <span class="k">val</span> <span class="nv">newDimension</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">)</span>
    <span class="nv">webDriver</span><span class="o">.</span><span class="py">manage</span><span class="o">.</span><span class="py">window</span><span class="o">.</span><span class="py">setSize</span><span class="o">(</span><span class="n">newDimension</span><span class="o">)</span>
    <span class="c1">// rest of the code goes here</span>
</code></pre></div></div> <p>Having done that, we are ready to get the full size screenshot with the following line:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">file</span> <span class="k">=</span> <span class="nv">webDriver</span><span class="o">.</span><span class="py">getScreenshotAs</span><span class="o">(</span><span class="nv">OutputType</span><span class="o">.</span><span class="py">FILE</span><span class="o">)</span>
</code></pre></div></div> <p>Lastly, we will save the screenshot to the local file system:</p> <div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">val</span> <span class="nv">destination</span> <span class="k">=</span> <span class="n">s</span><span class="s">"$directory/$filename(${width}x$originalHeight).png"</span>
    <span class="k">val</span> <span class="nv">destFile</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">destination</span><span class="o">)</span>
    <span class="nv">FileUtils</span><span class="o">.</span><span class="py">copyFile</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">destFile</span><span class="o">)</span>
</code></pre></div></div> <p>And this is it!</p> <blockquote> <p>You can find all these snippets on a <a href="https://github.com/diamantidis/scala-screenshots/tree/31d1b6b">GitHub project</a> that I have created.</p> </blockquote> <h2 id="result">Result</h2> <p>If you run the script (<code class="language-plaintext highlighter-rouge">sbt run</code>), you will see all the screenshots inside the <code class="language-plaintext highlighter-rouge">screenshot</code> folder on the root folder of your directory.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>screenshots
└── 2020-04-19
    ├── 2020-04-19-scala-script-for-fullsize-screenshots-for-different-screen-dimensions(1920x1080).png
    └── 2020-04-19-scala-script-for-fullsize-screenshots-for-different-screen-dimensions(414x896).png
</code></pre></div></div> <p>Thinking about the future, a potential next step is to add support for different WebDrivers so that I could see how the website is rendered on different browsers. And maybe make it a more user-friendly CLI app that would accept arguments and options and provide some feedback to the user.</p> <p>Lastly, it would be a great opportunity to try and use some libraries like <a href="https://zio.dev/">ZIO</a> to make it run concurrently and also make the code more testable.</p> <h2 id="conclusion">Conclusion</h2> <p>To sum up, in this post, I have created a Scala project that uses Selenium to capture full size screenshots of a webpage for different screen sizes and save them on a local directory.</p> <p>This could be of use if you make some UI changes on a webpage and you want to verify that everything looks great on different screen sizes, or if you want to keep a record of how the UI of a website evolves over time.</p> <p>Thanks for reading this post, I hope you find it useful! Feel free to reach out to me on <a href="https://twitter.com/diamantidis_io">Twitter</a> and share your comments about this post!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"> </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=A+Scala+script+to+take+full+size+webpage+screenshots+for+different+screen+dimensions&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F04%2F19%2Fscala-script-for-fullsize-screenshots-for-different-screen-dimensions" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=A+Scala+script+to+take+full+size+webpage+screenshots+for+different+screen+dimensions&amp;u=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F04%2F19%2Fscala-script-for-fullsize-screenshots-for-different-screen-dimensions" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F04%2F19%2Fscala-script-for-fullsize-screenshots-for-different-screen-dimensions" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
