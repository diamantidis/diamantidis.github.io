<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>Accessing web page properties from an iOS Share Extension</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Accessing web page properties from an iOS Share Extension" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A step-by-step guide on how to use Swift and JavaScript to access web page properties like the title and the favicon from an iOS Share Extension" /> <meta property="og:description" content="A step-by-step guide on how to use Swift and JavaScript to access web page properties like the title and the favicon from an iOS Share Extension" /> <link rel="canonical" href="https://diamantidis.github.io/2020/01/19/access-webpage-properties-from-ios-share-extension" /> <meta property="og:url" content="https://diamantidis.github.io/2020/01/19/access-webpage-properties-from-ios-share-extension" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-01-19T04:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="twitter:title" content="Accessing web page properties from an iOS Share Extension" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2020-01-19T04:00:00+00:00","datePublished":"2020-01-19T04:00:00+00:00","description":"A step-by-step guide on how to use Swift and JavaScript to access web page properties like the title and the favicon from an iOS Share Extension","headline":"Accessing web page properties from an iOS Share Extension","image":"https://diamantidis.github.io/assets/socialIcon.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2020/01/19/access-webpage-properties-from-ios-share-extension"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2020/01/19/access-webpage-properties-from-ios-share-extension"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper">
<div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div>
<nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"> <span class="menu-icon"> <svg viewbox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a>
</div> </nav>
</div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">Accessing web page properties from an iOS Share Extension</span> </h1> <div class="post-subheader"> <span class="post-date"> January 19, 2020 </span> <span class="post-divider">-</span> <span class="post-minutes"> 6 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#iOS" title="iOS">iOS</a> <a class="post-tag" href="/tags#Swift" title="Swift">Swift</a> <a class="post-tag" href="/tags#App+Extensions" title="App Extensions">App Extensions</a> </div> </div> </div> </header> <div class="post-content"> <p>A Share Extension is a type of App Extension which is used to share content with other apps. One such content type and a quite popular use case for share extensions is sharing websites and definitely one of the factors that led to this is the seamless integration with Safari.</p> <p>Recently I have been working on a web page Share Extension and one of the tasks that I wanted to achieve is to show the favicon of the web page as part of the UI of the share extension. After some research, I find out that a share extension offers some other capabilities and enables us to do more interesting things beyond just sharing the URL of the web page.</p> <p>One example is that it allows us to parse the web page that’s being shared and access its elements, like for example the title of the page or the favicon from the link tag on the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> of the website.</p> <p>And that’s what this post is all about! We are going to investigate how to access some of the web page properties like the title, the host name and the favicon URL for the website that is being shared.</p> <p>So, let’s go!</p> <blockquote> <p>For this post, I assume that you know how to create an iOS Share Extension. If you want to learn more, check out <a href="/2020/01/11/share-extension-custom-ui">a previous post describing how to create a Share Extension and customize its UI</a>.</p> </blockquote> <h1 id="implementation">Implementation</h1> <p>To begin with, let’s try to get the title of the web page. To accomplish that, we are going to use some JavaScript code which Safari will execute and return the results to our extension. Let’s see how!</p> <p>First, let’s move to our Share Extension and create a JavaScript file named <code class="language-plaintext highlighter-rouge">ExtensionClass.js</code> and add the following content:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">ExtensionClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>

<span class="nx">ExtensionClass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arguments</span><span class="p">.</span><span class="nx">completionFunction</span><span class="p">({</span>
            <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">ExtensionPreprocessingJS</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExtensionClass</span><span class="p">;</span>
</code></pre></div></div> <p>Basically what we are doing here is to create a custom JavaScript class that contains a <code class="language-plaintext highlighter-rouge">run</code> function and then assign a new instance of it to a global object named <code class="language-plaintext highlighter-rouge">ExtensionPreprocessingJS</code>. The name <code class="language-plaintext highlighter-rouge">ExtensionPreprocessingJS</code> is required in this file whereas the name of the custom class can vary.</p> <p>Safari will invoke this <code class="language-plaintext highlighter-rouge">run</code> function when it loads the JavaScript file and it will provide an argument with the name <code class="language-plaintext highlighter-rouge">completionFunction</code> which in turn takes a key-value object as a parameter. This key-value object is the information that will be passed to our <code class="language-plaintext highlighter-rouge">Share Extension</code>.</p> <p>After that, we will have to add an entry in the <code class="language-plaintext highlighter-rouge">Info.plist</code> file. Open this file and add the following key-value pair inside the dictionary value of the key <code class="language-plaintext highlighter-rouge">NSExtensionAttributes</code>:</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;key&gt;</span>NSExtensionJavaScriptPreprocessingFile<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>ExtensionClass<span class="nt">&lt;/string&gt;</span>
</code></pre></div></div> <p>We will also replace the value for the <code class="language-plaintext highlighter-rouge">NSExtensionActivationRule</code> from</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;string&gt;</span>TRUEPREDICATE<span class="nt">&lt;/string&gt;</span>
</code></pre></div></div> <p>to</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>NSExtensionActivationSupportsWebPageWithMaxCount<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;integer&gt;</span>1<span class="nt">&lt;/integer&gt;</span>
    <span class="nt">&lt;key&gt;</span>NSExtensionActivationSupportsWebURLWithMaxCount<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;integer&gt;</span>1<span class="nt">&lt;/integer&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
</code></pre></div></div> <p>Then, head to the Swift file and add the following function inside your View Controller:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">accessWebpageProperties</span><span class="p">(</span><span class="nv">extensionItem</span><span class="p">:</span> <span class="kt">NSExtensionItem</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">propertyList</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="n">kUTTypePropertyList</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">attachment</span> <span class="k">in</span> <span class="n">extensionItem</span><span class="o">.</span><span class="n">attachments</span><span class="o">!</span> <span class="k">where</span> <span class="n">attachment</span><span class="o">.</span><span class="nf">hasItemConformingToTypeIdentifier</span><span class="p">(</span><span class="n">propertyList</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">attachment</span><span class="o">.</span><span class="nf">loadItem</span><span class="p">(</span>
            <span class="nv">forTypeIdentifier</span><span class="p">:</span> <span class="n">propertyList</span><span class="p">,</span>
            <span class="nv">options</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
            <span class="nv">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>

                <span class="k">guard</span> <span class="k">let</span> <span class="nv">dictionary</span> <span class="o">=</span> <span class="n">item</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span>
                    <span class="k">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="kt">NSExtensionJavaScriptPreprocessingResultsKey</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span>
                    <span class="k">let</span> <span class="nv">title</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">"title"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">return</span>
                <span class="p">}</span>

                <span class="nf">print</span><span class="p">(</span><span class="s">"title: </span><span class="se">\(</span><span class="n">title</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Here, we iterate over the attachments if there are any and then filter those who conform to the <code class="language-plaintext highlighter-rouge">kUTTypePropertyList</code> type identifier. After that, we load the item’s data, parse it and using the key <code class="language-plaintext highlighter-rouge">NSExtensionJavaScript PreprocessingResultsKey</code> we retrieve the object passed on the <code class="language-plaintext highlighter-rouge">completionFunction</code> in the JavaScript code</p> <p>Lastly, all you have to do is to call this function from the <code class="language-plaintext highlighter-rouge">viewDidLoad</code> function, in the following way:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">item</span> <span class="o">=</span> <span class="n">extensionContext</span><span class="p">?</span><span class="o">.</span><span class="n">inputItems</span><span class="o">.</span><span class="n">first</span> <span class="k">as?</span> <span class="kt">NSExtensionItem</span> <span class="p">{</span>
    <span class="nf">accessWebpageProperties</span><span class="p">(</span><span class="nv">extensionItem</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <p>If you now run the extension Target on Safari, and try to share a web page using this Share Extension, you will see the title on the title of the page on the Console View.</p> <p>In a similar fashion, we can access other information like the host name or the URL of the favicon.</p> <p>Getting the host name in JavaScript is as easy as executing <code class="language-plaintext highlighter-rouge">document.location.hostname</code>, so it’s more or less the same as the title. On the other hand, retrieving the URL of the favicon is quite more complicated. The preferred way to declare a favicon and the one that most websites follow is by adding a link element with a <code class="language-plaintext highlighter-rouge">rel="icon"</code> or <code class="language-plaintext highlighter-rouge">rel="shortcut icon"</code> attribute on the HTML head.</p> <p>For this reason, we are going to add a function in our JavaScript file named <code class="language-plaintext highlighter-rouge">fetchFavicon</code> and its responsibility will be to traverse the web page and find if there is one such element.</p> <p>The final version of the <code class="language-plaintext highlighter-rouge">ExtensionClass.js</code> will be like the following snippet:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">ExtensionClass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{};</span>

<span class="nx">ExtensionClass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">run</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arguments</span><span class="p">.</span><span class="nx">completionFunction</span><span class="p">({</span>
            <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hostname</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">favicon</span><span class="dl">"</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchFavicon</span><span class="p">()</span>
        <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">fetchFavicon</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">"</span><span class="s2">link</span><span class="dl">"</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">element</span> <span class="o">=&gt;</span> <span class="nx">element</span><span class="p">.</span><span class="nx">rel</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">icon</span><span class="dl">"</span> <span class="o">||</span> <span class="nx">element</span><span class="p">.</span><span class="nx">rel</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">shortcut icon</span><span class="dl">"</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">elem</span> <span class="o">=&gt;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">href</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">ExtensionPreprocessingJS</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExtensionClass</span><span class="p">;</span>
</code></pre></div></div> <p>Then we can move back to our View Controller and edit the body of the <code class="language-plaintext highlighter-rouge">completionHandler</code> in <code class="language-plaintext highlighter-rouge">accessWebpageProperties</code> to look like the following snippet:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">guard</span> <span class="k">let</span> <span class="nv">dictionary</span> <span class="o">=</span> <span class="n">item</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span>
    <span class="k">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="kt">NSExtensionJavaScriptPreprocessingResultsKey</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">,</span>
    <span class="k">let</span> <span class="nv">title</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">"title"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span><span class="p">,</span>
    <span class="k">let</span> <span class="nv">hostname</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">"hostname"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span>
<span class="p">}</span>

<span class="c1">// Fallback to the favicon.ico file, if JavaScript returns nil</span>
<span class="k">let</span> <span class="nv">favicon</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">"favicon"</span><span class="p">]</span> <span class="k">as?</span> <span class="kt">String</span> <span class="p">??</span> <span class="s">"</span><span class="se">\(</span><span class="n">hostname</span><span class="se">)</span><span class="s">/favicon.ico"</span>
<span class="nf">print</span><span class="p">(</span><span class="s">"title: </span><span class="se">\(</span><span class="n">title</span><span class="se">)</span><span class="s">, hostname: </span><span class="se">\(</span><span class="n">hostname</span><span class="se">)</span><span class="s">, favicon: </span><span class="se">\(</span><span class="n">favicon</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>    
</code></pre></div></div> <p>And that’s about it! If you try to run and use the Share Extension again, you will see the message with the corresponding values on the Console View. <img class="emoji" title=":tada:" alt=":tada:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png" height="20" width="20"></p> <h1 id="conclusion">Conclusion</h1> <p>In this post, we have seen how to parse the webpage from our webpage Share Extension and access some information like the title, the host name and the favicon’s URL.</p> <p>Depending on your case, you can follow a similar approach to access the webpage elements that you are interested in and later use them in your View Controller to populate some UI elements of the Share Extension or share it with the associated main app.</p> <p>Thanks for reading, I hope you find this post useful! Feel free to follow me on <a href="https://twitter.com/diamantidis_io">Twitter</a> and share your questions, suggestion or comments about this post!!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"> </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=Accessing+web+page+properties+from+an+iOS+Share+Extension&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F19%2Faccess-webpage-properties-from-ios-share-extension" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=Accessing+web+page+properties+from+an+iOS+Share+Extension&amp;u=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F19%2Faccess-webpage-properties-from-ios-share-extension" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F19%2Faccess-webpage-properties-from-ios-share-extension" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
