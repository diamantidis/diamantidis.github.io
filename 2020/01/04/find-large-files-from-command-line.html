<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>How to find large files from the command line</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="How to find large files from the command line" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A post about how to find out which files consume most of the storage disk and how to clean them to recover disk space" /> <meta property="og:description" content="A post about how to find out which files consume most of the storage disk and how to clean them to recover disk space" /> <link rel="canonical" href="https://diamantidis.github.io/2020/01/04/find-large-files-from-command-line" /> <meta property="og:url" content="https://diamantidis.github.io/2020/01/04/find-large-files-from-command-line" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-01-04T04:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="twitter:title" content="How to find large files from the command line" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2020-01-04T04:00:00+00:00","datePublished":"2020-01-04T04:00:00+00:00","description":"A post about how to find out which files consume most of the storage disk and how to clean them to recover disk space","headline":"How to find large files from the command line","image":"https://diamantidis.github.io/assets/socialIcon.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2020/01/04/find-large-files-from-command-line"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2020/01/04/find-large-files-from-command-line"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper">
<div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div>
<nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"> <span class="menu-icon"> <svg viewbox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a>
</div> </nav>
</div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">How to find large files from the command line</span> </h1> <div class="post-subheader"> <span class="post-date"> January 4, 2020 </span> <span class="post-divider">-</span> <span class="post-minutes"> 5 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Unix" title="Unix">Unix</a> <a class="post-tag" href="/tags#Storage" title="Storage">Storage</a> <a class="post-tag" href="/tags#Command+Line" title="Command Line">Command Line</a> </div> </div> </div> </header> <div class="post-content"> <p>Have you ever ran into issues with your storage disk being full?</p> <p>Recently I faced this issue on my Mac Book Pro and as result I get a notification like the following:</p> <p><img src="https://diamantidis.github.io/assets/storage/mac-book-disk-space-notification.png" alt="Mac Book disk space notification screenshot"></p> <p>But instead of just following the easy solution and moving my <code class="language-plaintext highlighter-rouge">Desktop</code> and <code class="language-plaintext highlighter-rouge">Download</code> folder to an external disk, I took this opportunity to delve deeper and find out what actually consume most of the storage disk.</p> <p>And this is going to be the topic of this post; I will try to elaborate my process of using a set of commands to find the resources that consume the storage of my Mac Book Pro.</p> <blockquote> <p>Disclaimer: This post is meant for Unix System users. Sorry Windows users :)</p> </blockquote> <p>Let’s start with how to find this files!</p> <h2 id="how-to-find-files-and-directories-size">How to find files and directories size</h2> <p>A command that we can use to find the disk usage of a file or a directory is <code class="language-plaintext highlighter-rouge">du</code>. This command comes with a few useful options which you can find by reading the man page (run <code class="language-plaintext highlighter-rouge">man du</code> on your Terminal). For our scenario, we are going to use two of them; <code class="language-plaintext highlighter-rouge">-a</code> and <code class="language-plaintext highlighter-rouge">-h</code>. The option <code class="language-plaintext highlighter-rouge">-a</code> can be used to display an entry for each file in the directory and <code class="language-plaintext highlighter-rouge">-h</code> outputs “human-readable” unit suffixes like, for example, <code class="language-plaintext highlighter-rouge">K</code> and <code class="language-plaintext highlighter-rouge">M</code> for Kilobytes and Megabytes respectively.</p> <p>Long story short, if you navigate to a folder using the Terminal, let’s say for example your <code class="language-plaintext highlighter-rouge">~/Downloads</code> folder, and execute the command <code class="language-plaintext highlighter-rouge">du -ah .</code>, you will get a list of your files and folder inside the <code class="language-plaintext highlighter-rouge">~/Downloads</code> folder alongside with the info about their disk usage.</p> <p>Such information is pretty helpful, but it’s quite hard to figure out which files are bigger. It would make it much easier if we could sort the output in reverse order, from the biggest file to the smallest. In order to do so, we are going to use the <code class="language-plaintext highlighter-rouge">sort</code> command. <code class="language-plaintext highlighter-rouge">sort</code> command also comes with some options that we are going to use; like <code class="language-plaintext highlighter-rouge">-r</code> for reverse order and <code class="language-plaintext highlighter-rouge">-h</code> which will take into account the unit suffixes from the <code class="language-plaintext highlighter-rouge">du</code> command output.</p> <p>Now, the command will look like <code class="language-plaintext highlighter-rouge">du -ah . | sort -rh</code> and voilà; the output is the list of files in descending order based on their disk usage.</p> <p>A further nice addition to this command would be some kind of limit on the results of the output. Some times, directories may contain multiple quite small files that will only add noise and make the output much harder to read. Such an example is the <code class="language-plaintext highlighter-rouge">.git</code> folder. For this reason, we are going to use the <code class="language-plaintext highlighter-rouge">head</code> command, which will help us get only the first lines of the input. We are also going to use the <code class="language-plaintext highlighter-rouge">-n</code> option to limit the output on a specific number of lines.</p> <p>Finally our command will look like this <code class="language-plaintext highlighter-rouge">du -ah . | sort -rh | head -n 20</code>. If you try to run it, you will get a list of the twenty biggest files on your current directory.</p> <h2 id="adding-an-alias">Adding an alias</h2> <p>Let’s be honest, remembering this command and the options can be quite hard. Therefore, we can create an alias to this command.</p> <p>Based on your Terminal setup, head to the <code class="language-plaintext highlighter-rouge">~/.bashrc</code> or <code class="language-plaintext highlighter-rouge">~/.zshrc</code> file. There, we are going to define our alias. I chose <code class="language-plaintext highlighter-rouge">dirinfo</code> as a name, but feel free to change it if you would like to. In this file, we are going to define a function which will contain a slightly changed version of the command that we previously ran. We are going to use a parameter for the directory argument of the <code class="language-plaintext highlighter-rouge">du</code> command to make this command a little more flexible.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dirinfo<span class="o">()</span>
<span class="o">{</span>
    <span class="nb">du</span> <span class="nt">-ah</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> | <span class="nb">sort</span> <span class="nt">-rh</span> | <span class="nb">head</span> <span class="nt">-n</span> 20
<span class="o">}</span>
<span class="nb">alias </span><span class="nv">dirinfo</span><span class="o">=</span>dirinfo<span class="o">()</span>
</code></pre></div></div> <p>Save the changes and run <code class="language-plaintext highlighter-rouge">source ~/.bashrc</code> or <code class="language-plaintext highlighter-rouge">source ~/.zshrc</code> or just restart your Terminal.</p> <p>By now, you should be able to run commands like <code class="language-plaintext highlighter-rouge">dirinfo ~/Desktop</code> or <code class="language-plaintext highlighter-rouge">dirinfo .</code> to get the disk usage information for a specific directory!</p> <p>So, let’s use this command to find which files take the most space.</p> <h2 id="example">Example</h2> <p>As a developer, regardless of the stack, be it iOS, Android, front-end or back-end, it is quite common that the tools that we are using require a decent amount of disk space.</p> <p>In my case, my first suspicion was that Xcode and the simulators would occupy a big portion of my storage disk. It was quite easy to validate my assumption, just by running <code class="language-plaintext highlighter-rouge">dirinfo ~/Library/Developer/Xcode</code> and <code class="language-plaintext highlighter-rouge">dirinfo ~/Library/Developer/CoreSimulator</code>. By deleting some files on these directories, I manage to recover dozens of Gigabytes of storage disk, most of which are occupied by files you no longer need.</p> <blockquote> <p>Hint: If you are an iOS developer, a neat command that can help you recover some disk space is the <code class="language-plaintext highlighter-rouge">xcrun simctl delete unavailable</code> which will delete all the old simulators.</p> </blockquote> <p>Feel free to continue the exploration for the files which take most of the storage on your machine. You may be surprised by some of the results.</p> <p>In my case I was quite surprised to find that it was the folder with my old project that I no longer work on (a.k.a project graveyard - I guess we all have one <img class="emoji" title=":smirk:" alt=":smirk:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png" height="20" width="20">) and Photos, both of which can easily be moved to an external disk or cloud and be recovered when needed.</p> <h2 id="conclusion">Conclusion</h2> <p>And that’s about it for this post. Though I was kind of annoyed when I first saw this notification, I would say that eventually it turned out well as I was able to find out more about which files occupy a great part of the storage disk and also have a command that will be there to help me if I face the same issue again in the future.</p> <p>Thanks for reading, I hope you find this post useful! If you have any questions, suggestions or comments about this post, just let me know on <a href="https://twitter.com/diamantidis_io">Twitter</a>, I would love to hear from you!!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"> </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=How+to+find+large+files+from+the+command+line&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F04%2Ffind-large-files-from-command-line" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=How+to+find+large+files+from+the+command+line&amp;u=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F04%2Ffind-large-files-from-command-line" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2020%2F01%2F04%2Ffind-large-files-from-command-line" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
