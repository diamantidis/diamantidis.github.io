<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>Useful Curl features</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Useful Curl features" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A list of options when using curl to send API requests to a server from the terminal like timing breakdown, file upload, proxy and url specification" /> <meta property="og:description" content="A list of options when using curl to send API requests to a server from the terminal like timing breakdown, file upload, proxy and url specification" /> <link rel="canonical" href="https://diamantidis.github.io/2019/01/06/curl-options" /> <meta property="og:url" content="https://diamantidis.github.io/2019/01/06/curl-options" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2019-01-06T06:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/socialIcon.png" /> <meta property="twitter:title" content="Useful Curl features" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2019-01-06T06:00:00+00:00","datePublished":"2019-01-06T06:00:00+00:00","description":"A list of options when using curl to send API requests to a server from the terminal like timing breakdown, file upload, proxy and url specification","headline":"Useful Curl features","image":"https://diamantidis.github.io/assets/socialIcon.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2019/01/06/curl-options"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2019/01/06/curl-options"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper">
<div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div>
<nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger"> <label for="nav-trigger"> <span class="menu-icon"> <svg viewbox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a>
</div> </nav>
</div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">Useful Curl features</span> </h1> <div class="post-subheader"> <span class="post-date"> January 6, 2019 </span> <span class="post-divider">-</span> <span class="post-minutes"> 5 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Curl" title="Curl">Curl</a> <a class="post-tag" href="/tags#Command+Line" title="Command Line">Command Line</a> <a class="post-tag" href="/tags#File+Upload" title="File Upload">File Upload</a> </div> </div> </div> </header> <div class="post-content"> <p>Happy New Year everyone!! This is my first post of the year!!<br> Today’s topic is a guide about some of the features of <a href="https://github.com/curl/curl">curl</a>. Curl is a command line tool that can be used to make API requests and generally to transfer data to a URL from the Terminal.</p> <p>As a developer you will often encounter situations where you will have to communicate with an API to fetch information or do some kind of transaction (create, update, delete, file upload). And curl is a tool to help on these situations. To install curl on a Mac, given that Homebrew is already installed, you just have to run <code class="language-plaintext highlighter-rouge">brew install curl</code> and then you will be able to run the <code class="language-plaintext highlighter-rouge">curl</code> command. To get more information about curl, you can refer to curl’s man page by typing <code class="language-plaintext highlighter-rouge">man curl</code> on your terminal.</p> <blockquote> <p>To search for options when using the man command, type <code class="language-plaintext highlighter-rouge">/</code> followed by the term that you are looking for. For example, to find the occurrences of the word <code class="language-plaintext highlighter-rouge">file</code>, just type <code class="language-plaintext highlighter-rouge">/file</code> and then use <code class="language-plaintext highlighter-rouge">n</code> and <code class="language-plaintext highlighter-rouge">Shift</code> + <code class="language-plaintext highlighter-rouge">n</code>, to navigate forth and back respectively.</p> </blockquote> <blockquote> <p>If you are using Alamofire to handle the requests, then you can print the curl command of any of them, by just using <code class="language-plaintext highlighter-rouge">debugPrint(request)</code>, where request is the <code class="language-plaintext highlighter-rouge">Alamofire.request</code>. More info can be found on <a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/Usage.md#customdebugstringconvertible">Alamofire’s documentation</a>.</p> </blockquote> <blockquote> <p>For all the example mentioned in this post, I am using a local Vapor project, with the initial <code class="language-plaintext highlighter-rouge">Todo</code> endpoints plus some others that I added to present some of the options. I will come back with more about Vapor on a future post. <img class="emoji" title=":wink:" alt=":wink:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png" height="20" width="20"></p> </blockquote> <p>So let’s start!!!</p> <h1 id="verbose-mode">Verbose mode</h1> <p>When making a request, sometimes you are not only interested about the content of the response, but maybe also for some other information like the response status or the headers. To get this kind of information, along with a more detailed representation of both the request and the response, you can append your command with the option <code class="language-plaintext highlighter-rouge">-v</code> or <code class="language-plaintext highlighter-rouge">--verbose</code>. For example, you can write a command like this,</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl 'http://localhost:8080/todos' -v
</code></pre></div></div> <h1 id="timing-breakdown">Timing breakdown</h1> <p>To get more information on the exact duration that each step of the request takes, like how long it takes until the name resolving is completed, or how long it takes to connect with the server or how long it takes to transfer the information, you can use the option <code class="language-plaintext highlighter-rouge">--write-out</code> together with the options available like <code class="language-plaintext highlighter-rouge">time_namelookup</code>, <code class="language-plaintext highlighter-rouge">time_connect</code>, <code class="language-plaintext highlighter-rouge">time_starttransfer</code> etc..</p> <p><img src="https://diamantidis.github.io/assets/curl/write_out_option.png" alt="Write-out option from man page screenshot"></p> <p>As an example you can use this command</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl \
--output /dev/null \
--silent \
--write-out 'namelookup:    %{time_namelookup}\nconnect:       %{time_connect}\npretransfer:   %{time_pretransfer}\nstarttransfer: %{time_starttransfer}\ntotal:         %{time_total}\n' \
http://localhost:8080/todos 
</code></pre></div></div> <p>and the result will be a response like this:</p> <p><img src="https://diamantidis.github.io/assets/curl/write_out_output.png" alt="Write-out output screenshot"></p> <blockquote> <p>The options <code class="language-plaintext highlighter-rouge">--output /dev/null</code> and <code class="language-plaintext highlighter-rouge">--silent</code> are used to not show the response of the request and to not show the progress of the request respectively, thus getting a better-looking overview of the information.</p> </blockquote> <p>An alternative to using this lengthy command line is to use a file instead. You can create a file with the content of the <code class="language-plaintext highlighter-rouge">--write-out</code> option and then use this file.</p> <p>For example, you can create a file, with the name <code class="language-plaintext highlighter-rouge">curl_format.txt</code> and the following content:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    namelookup:  %{time_namelookup}\n
       connect:  %{time_connect}\n
   pretransfer:  %{time_pretransfer}\n
 starttransfer:  %{time_starttransfer}\n
                    ----------\n
         total:  %{time_total}\n
</code></pre></div></div> <p>And then run the command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl \
-o /dev/null \
-s \
-w '@curl_format.txt' \
http://localhost:8080/todos 
</code></pre></div></div> <p>and you will get a familiar response as before.</p> <blockquote> <p><code class="language-plaintext highlighter-rouge">-o</code>, <code class="language-plaintext highlighter-rouge">-s</code> and <code class="language-plaintext highlighter-rouge">-m</code> are the single character alternative to <code class="language-plaintext highlighter-rouge">--output</code>, <code class="language-plaintext highlighter-rouge">--silent</code> and <code class="language-plaintext highlighter-rouge">--write-out</code> options</p> </blockquote> <h1 id="proxy">Proxy</h1> <p>If you want to pass the request through a proxy, like <a href="https://www.charlesproxy.com/">Charles</a> you can use the option <code class="language-plaintext highlighter-rouge">-x</code> or <code class="language-plaintext highlighter-rouge">--proxy</code>, for example</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -x http://localhost:8888 http://localhost:8080/todos
</code></pre></div></div> <p><img src="https://diamantidis.github.io/assets/curl/curl_man_proxy_option.png" alt="man page proxy option screenshot"></p> <h1 id="url-options">URL options</h1> <p>One of the first topics that the <code class="language-plaintext highlighter-rouge">man curl</code> command covers is the URL and how this can be formatted.</p> <p><img src="https://diamantidis.github.io/assets/curl/curl_man_url_options.png" alt="man page url options screenshot"></p> <p>With a smart use of this formatting template, you can have a series of numbers as a url param and in this way making the same request multiple times, like in the following example. Running <code class="language-plaintext highlighter-rouge">curl 'http://localhost:8080/todos?[1-5]'</code> will result in making 5 requests</p> <p><img src="https://diamantidis.github.io/assets/curl/curl_multiple_requests.png" alt="curl multiple requests screenshot"></p> <p>You can also use these options to make requests to fetch the corresponding information for a list of items, like <code class="language-plaintext highlighter-rouge">curl 'http://localhost:8080/todos/[1-5]'</code> which will result in 5 requests, one for each id. It also supports a stepper to the range, like <code class="language-plaintext highlighter-rouge">curl 'http://localhost:8080/todos/[1-5:2]'</code> to make a request only for the odd numbers.</p> <p>The results will be:</p> <p><img src="https://diamantidis.github.io/assets/curl/curl_multiple_requests_stepper.png" alt="curl multiple requests stepper screenshot"></p> <p>Lastly, you can provide a set of options inside curly brackets, like in the following command</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl 'http://localhost:8080/todos/{1,2,4}'
</code></pre></div></div> <p>which will result in three request for these ids. The values can be alphanumeric, so this can be used with letters or words too, like for example</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl 'http://localhost:8080/todos/{a,b,c}'
</code></pre></div></div> <p>And also they can be used simultaneously when constructing a url like, <code class="language-plaintext highlighter-rouge">curl 'http://localhost:8080/v[1-2]/todos/{a,b,c}'</code>, which will result in 6 requests, three for v1 and three for v2.</p> <h1 id="file-upload">File upload</h1> <p>When you want to upload a file you can use the following curl command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -X POST \
'http://localhost:8080/upload' \
-H 'Content-Type: multipart/form-data;' \
-F 'image=@image.png;type=image/png;'
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">-F</code> option is used to specify the HTTP multipart POST data and <code class="language-plaintext highlighter-rouge">image</code> is the name of the field. Again, a more detailed description about this option can be found on the man page. <img src="https://diamantidis.github.io/assets/curl/curl_man_form_option.png" alt="man page form option screenshot"></p> <h2 id="conclusion">Conclusion</h2> <p>These are a few examples of curl usage that I found useful for me and I want to share as it could come handy for others too. Obviously, there are a lot more options and the way to find them is by searching the man page. Hope that you find it useful too, and if want to mention some other options that I haven’t mentioned, just let me know on <a href="https://twitter.com/diamantidis_io">Twitter</a>!!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;"> </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=Useful+Curl+features&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2019%2F01%2F06%2Fcurl-options" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=Useful+Curl+features&amp;u=https%3A%2F%2Fdiamantidis.github.io%2F2019%2F01%2F06%2Fcurl-options" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdiamantidis.github.io%2F2019%2F01%2F06%2Fcurl-options" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
