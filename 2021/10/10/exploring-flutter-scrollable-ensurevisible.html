<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"><title>Exploring Flutter's Scrollable.ensureVisible</title><!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Exploring Flutter’s Scrollable.ensureVisible" /> <meta name="author" content="Ioannis Diamantidis" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A post to showcase how to use Scrollable.ensureVisible to scroll from one widget to another in a SingleChildScrollView" /> <meta property="og:description" content="A post to showcase how to use Scrollable.ensureVisible to scroll from one widget to another in a SingleChildScrollView" /> <link rel="canonical" href="https://diamantidis.github.io/2021/10/10/exploring-flutter-scrollable-ensurevisible" /> <meta property="og:url" content="https://diamantidis.github.io/2021/10/10/exploring-flutter-scrollable-ensurevisible" /> <meta property="og:site_name" content="Ioannis Diamantidis" /> <meta property="og:image" content="https://diamantidis.github.io/assets/social/scrollable_ensure_visible.png" /> <meta property="og:image:height" content="512" /> <meta property="og:image:width" content="682" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2021-10-10T04:00:00+00:00" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://diamantidis.github.io/assets/social/scrollable_ensure_visible.png" /> <meta property="twitter:title" content="Exploring Flutter’s Scrollable.ensureVisible" /> <meta name="twitter:site" content="@diamantidis_io" /> <meta name="twitter:creator" content="@diamantidis_io" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ioannis Diamantidis","url":"https://diamantidis.github.io"},"dateModified":"2021-10-10T04:00:00+00:00","datePublished":"2021-10-10T04:00:00+00:00","description":"A post to showcase how to use Scrollable.ensureVisible to scroll from one widget to another in a SingleChildScrollView","headline":"Exploring Flutter’s Scrollable.ensureVisible","image":{"width":682,"height":512,"url":"https://diamantidis.github.io/assets/social/scrollable_ensure_visible.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2021/10/10/exploring-flutter-scrollable-ensurevisible"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://diamantidis.github.io/assets/socialIcon.png"},"name":"Ioannis Diamantidis"},"url":"https://diamantidis.github.io/2021/10/10/exploring-flutter-scrollable-ensurevisible"}</script> <!-- End Jekyll SEO tag --> <link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"> <link rel="manifest" href="/assets/site.webmanifest"> <link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5"> <link rel="shortcut icon" href="/assets/favicon.ico"> <meta name="msapplication-TileColor" content="#da532c"> <meta name="msapplication-config" content="/assets/browserconfig.xml"> <meta name="theme-color" content="#ffffff"><!-- Buy me a coffee widget --> <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="diamantidis" data-description="Support me on Buy me a coffee!" data-message="" data-color="#347ab7" data-position="Right" data-x_margin="18" data-y_margin="18"></script> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script src="https://cdn.telemetrydeck.com/websdk/telemetrydeck.min.js" data-app-id='38585865-E115-4830-8D37-7A8F1213DC6B' ></script> <script> !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]); posthog.init('phc_sTVQpj2y4ME7gaB3ETrOfwqd4B78MrA2ixW11xju0Hg',{api_host:'https://eu.posthog.com'}) </script></head> <body><header class="site-header" role="banner"> <div class="wrapper"><div class="left-container"> <div class="title-wrapper"> <a class="site-title" rel="author" href="/"> <h1>Ioannis Diamantidis</h1> </a> </div> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-sm"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> </div><nav class="site-nav"> <input type="checkbox" id="nav-trigger" class="nav-trigger" /> <label for="nav-trigger"> <span class="menu-icon"> <svg viewBox="0 0 18 15" width="18px" height="15px"> <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" /> </svg> </span> </label> <div class="trigger"> <a class="page-link" href="/tips" title="Tips">Tips</a><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a></div> </nav></div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1> <span class="post-title break-long-word">Exploring Flutter&#39;s Scrollable.ensureVisible</span> </h1> <div class="post-subheader"> <span class="post-date"> October 10, 2021 </span> <span class="post-divider">-</span> <span class="post-minutes"> 10 min read </span> <div class="outer-post-tags"> <div class="post-tags"> <a class="post-tag" href="/tags#Flutter" title="Flutter">Flutter</a> </div> </div> </div> </header> <div class="post-content"> <p>Have you ever had to build an app with a scroll view of multiple widgets with different heights, and you wanted to add a link so that the user can automatically scroll from one widget to another? One such example could be the table of contents for an article or a menu.</p> <p>In this post, I will showcase how we can implement this and in order to do so, I am going to use a screen with a few sections and a table of contents at the top of the screen with links to the corresponding sections.</p> <p>Let’s see how!</p> <blockquote> <p>This post is based on <code class="language-plaintext highlighter-rouge">Flutter 2.5.2</code> and <code class="language-plaintext highlighter-rouge">Dart SDK 2.14.3</code></p> </blockquote> <h2 id="solution">Solution</h2> <p>To do so, we are going to use <a href="https://api.flutter.dev/flutter/widgets/Scrollable/ensureVisible.html"><code class="language-plaintext highlighter-rouge">Scrollable.ensureVisible</code></a> within a <code class="language-plaintext highlighter-rouge">SingleChildScrollView</code> widget with a <code class="language-plaintext highlighter-rouge">Column</code> child.</p> <p>Briefly, we will create a <code class="language-plaintext highlighter-rouge">GlobalKey()</code> for each section. Then we will use this key as the key of the widget that the link will be targeting. Finally, we are going to use this key when we press the link from the table of contents like in the following snippet:</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">final</span> <span class="n">targetContext</span> <span class="o">=</span> <span class="n">targetKey</span><span class="o">.</span><span class="na">currentContext</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">targetContext</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Scrollable</span><span class="o">.</span><span class="na">ensureVisible</span><span class="o">(</span>
        <span class="n">targetContext</span><span class="o">,</span>
        <span class="nl">duration:</span> <span class="kd">const</span> <span class="n">Duration</span><span class="o">(</span><span class="nl">milliseconds:</span> <span class="mi">400</span><span class="o">),</span>
        <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">easeInOut</span><span class="o">,</span>
    <span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>As a result, the target widget will get visible after 400 milliseconds.</p> <p>In the next section, I will try to give a more detailed presentation of the implementation!</p> <h2 id="implementation">Implementation</h2> <h3 id="prep-work">Prep work</h3> <p>First of all, let’s create a data structure that will represent the section. It will have a key, a title and a body.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Section</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">GlobalKey</span> <span class="n">key</span><span class="o">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">body</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">Section</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">key</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">body</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>The title will be used in the table of contents and the key will be used to scroll to the target section.</p> <p>Then, we will use this class to generate some dummy data for our example. We can use some lorem ipsum to represent some long text.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="n">reallyLongBody</span> <span class="o">=</span>
    <span class="s">'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce venenatis pharetra dui, ac semper nulla dapibus ultrices.'</span>
    <span class="s">' Pellentesque sed erat accumsan lorem rhoncus mattis eu eget nulla. Phasellus sagittis vehicula dapibus. Nulla dolor nunc, '</span>
    <span class="s">'feugiat ac ullamcorper vel, commodo sed lacus. Nunc volutpat rutrum euismod. Nullam venenatis imperdiet odio, non porta leo '</span>
    <span class="s">'ullamcorper ac. Aliquam fringilla mauris ut ante faucibus, non tempus elit placerat. Donec sed porttitor tellus. Donec lobortis '</span>
    <span class="s">'arcu id lectus commodo varius. Fusce tincidunt ante in faucibus suscipit. Nulla facilisi. Nunc at nibh dictum sem aliquet '</span>
    <span class="s">'consectetur eu nec neque. Nullam ullamcorper vulputate nisl quis pharetra. Etiam dapibus ullamcorper magna, a iaculis libero '</span>
    <span class="s">'dignissim in. Vestibulum dictum, justo posuere consectetur eleifend, augue mi dictum dui, eu sollicitudin elit mauris vel lacus. '</span>
    <span class="s">'Donec dui felis, dapibus vel urna at, commodo facilisis felis.</span><span class="se">\n</span><span class="s">Curabitur faucibus leo ipsum, in vehicula risus rhoncus id. Donec '</span>
    <span class="s">'ac velit quis nulla suscipit efficitur. Nulla non euismod neque. Sed blandit urna sed ex tempor sagittis. Curabitur condimentum nec '</span>
    <span class="s">'dui quis sollicitudin. Proin consectetur, metus sed rutrum varius, mi augue placerat est, sed posuere risus nunc ac urna. Nam leo '</span>
    <span class="s">'erat, bibendum non nibh sed, sollicitudin aliquet metus. Aliquam finibus turpis vitae leo laoreet molestie.'</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">sections</span> <span class="o">=</span> <span class="o">[</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'1. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'2. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'3. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'4. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'5. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
  <span class="n">Section</span><span class="o">(</span><span class="n">GlobalKey</span><span class="o">(),</span> <span class="s">'6. Section'</span><span class="o">,</span> <span class="n">reallyLongBody</span><span class="o">),</span>
<span class="o">];</span>
</code></pre></div></div> <h3 id="widgets">Widgets</h3> <p>Next, let’s create a widget for the <code class="language-plaintext highlighter-rouge">Section</code>, where we are going to show the title and the body of each section</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">SectionWidget</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">Section</span> <span class="n">section</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">SectionWidget</span><span class="o">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span> <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">section</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Container</span><span class="o">(</span>
        <span class="nl">decoration:</span> <span class="kd">const</span> <span class="n">BoxDecoration</span><span class="o">(</span>
          <span class="nl">color:</span> <span class="n">Color</span><span class="o">(</span><span class="mh">0xfffff8e2</span><span class="o">),</span>
          <span class="nl">borderRadius:</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="n">Radius</span><span class="o">.</span><span class="na">circular</span><span class="o">(</span><span class="mf">8.0</span><span class="o">)),</span>
        <span class="o">),</span>
        <span class="nl">margin:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">symmetric</span><span class="o">(</span><span class="nl">horizontal:</span> <span class="mi">16</span><span class="o">,</span> <span class="nl">vertical:</span> <span class="mi">8</span><span class="o">),</span>
        <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">symmetric</span><span class="o">(</span><span class="nl">horizontal:</span> <span class="mi">16</span><span class="o">,</span> <span class="nl">vertical:</span> <span class="mi">8</span><span class="o">),</span>
        <span class="nl">child:</span> <span class="n">Column</span><span class="o">(</span>
          <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">stretch</span><span class="o">,</span>
          <span class="nl">children:</span> <span class="o">[</span>
            <span class="n">Text</span><span class="o">(</span>
              <span class="n">section</span><span class="o">.</span><span class="na">title</span><span class="o">,</span>
              <span class="nl">textAlign:</span> <span class="n">TextAlign</span><span class="o">.</span><span class="na">center</span><span class="o">,</span>
              <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">textTheme</span>
                  <span class="o">.</span><span class="na">headline2</span>
                  <span class="o">?.</span><span class="na">copyWith</span><span class="o">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black</span><span class="o">),</span>
            <span class="o">),</span>
            <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span>
              <span class="nl">height:</span> <span class="mi">36</span><span class="o">,</span>
            <span class="o">),</span>
            <span class="n">Text</span><span class="o">(</span>
              <span class="n">section</span><span class="o">.</span><span class="na">body</span><span class="o">,</span>
              <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">textTheme</span>
                  <span class="o">.</span><span class="na">bodyText1</span>
                  <span class="o">?.</span><span class="na">copyWith</span><span class="o">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="o">,</span> <span class="nl">height:</span> <span class="mf">1.3</span><span class="o">),</span>
            <span class="o">)</span>
          <span class="o">],</span>
        <span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>After that, let’s create a widget for the link to a section. We will name it <code class="language-plaintext highlighter-rouge">SectionLink</code> and we will pass a section and the callback for the <code class="language-plaintext highlighter-rouge">onTap</code> event of the <code class="language-plaintext highlighter-rouge">InkWell</code>.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">SectionLink</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">Section</span> <span class="n">section</span><span class="o">;</span>
  <span class="kd">final</span> <span class="kt">void</span> <span class="n">Function</span><span class="o">(</span><span class="n">Section</span><span class="o">)</span> <span class="n">onTap</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">SectionLink</span><span class="o">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span> <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">section</span><span class="o">,</span> <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onTap</span><span class="o">})</span>
      <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">InkWell</span><span class="o">(</span>
      <span class="nl">onTap:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="n">onTap</span><span class="o">(</span><span class="n">section</span><span class="o">),</span>
      <span class="nl">child:</span> <span class="n">Padding</span><span class="o">(</span>
        <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mf">8.0</span><span class="o">),</span>
        <span class="nl">child:</span> <span class="n">Text</span><span class="o">(</span>
          <span class="n">section</span><span class="o">.</span><span class="na">title</span><span class="o">,</span>
          <span class="nl">style:</span> <span class="n">Theme</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
              <span class="o">.</span><span class="na">textTheme</span>
              <span class="o">.</span><span class="na">headline3</span>
              <span class="o">?.</span><span class="na">copyWith</span><span class="o">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black87</span><span class="o">,</span> <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">),</span>
        <span class="o">),</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Next, we are going to add a <code class="language-plaintext highlighter-rouge">TableOfContents</code> widget, where we basically iterate on the sections and for each section, we create a <code class="language-plaintext highlighter-rouge">SectionLink</code>.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">TableOfContents</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">;</span>
  <span class="kd">final</span> <span class="kt">void</span> <span class="n">Function</span><span class="o">(</span><span class="n">Section</span><span class="o">)</span> <span class="n">onItemTap</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">TableOfContents</span><span class="o">({</span>
    <span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span>
    <span class="k">this</span><span class="o">.</span><span class="na">sections</span> <span class="o">=</span> <span class="kd">const</span> <span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;[],</span>
    <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">onItemTap</span><span class="o">,</span>
  <span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Container</span><span class="o">(</span>
      <span class="nl">margin:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mi">20</span><span class="o">),</span>
      <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="o">(</span><span class="nl">left:</span> <span class="mi">16</span><span class="o">,</span> <span class="nl">top:</span> <span class="mi">24</span><span class="o">,</span> <span class="nl">right:</span> <span class="mi">16</span><span class="o">,</span> <span class="nl">bottom:</span> <span class="mi">10</span><span class="o">),</span>
      <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="o">(</span>
        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white12</span><span class="o">.</span><span class="na">withOpacity</span><span class="o">(</span><span class="mf">0.3</span><span class="o">),</span>
        <span class="nl">borderRadius:</span> <span class="kd">const</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="n">Radius</span><span class="o">.</span><span class="na">circular</span><span class="o">(</span><span class="mf">8.0</span><span class="o">)),</span>
        <span class="nl">border:</span> <span class="n">Border</span><span class="o">.</span><span class="na">all</span><span class="o">(</span>
          <span class="nl">width:</span> <span class="mi">2</span><span class="o">,</span>
          <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">,</span>
        <span class="o">),</span>
      <span class="o">),</span>
      <span class="nl">child:</span> <span class="n">Column</span><span class="o">(</span>
        <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">stretch</span><span class="o">,</span>
        <span class="nl">children:</span> <span class="n">sections</span>
            <span class="o">.</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">SectionLink</span><span class="o">(</span><span class="nl">section:</span> <span class="n">e</span><span class="o">,</span> <span class="nl">onTap:</span> <span class="n">onItemTap</span><span class="o">))</span>
            <span class="o">.</span><span class="na">toList</span><span class="o">(),</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Finally, let’s create <code class="language-plaintext highlighter-rouge">ArticlePage</code> where we will tie everything together. In this widget, we will create a <code class="language-plaintext highlighter-rouge">SingleChildScrollView</code> with a <code class="language-plaintext highlighter-rouge">Column</code> widget containing the <code class="language-plaintext highlighter-rouge">TableOfContents</code> and a <code class="language-plaintext highlighter-rouge">ListView</code> with the sections.</p> <p>For the <code class="language-plaintext highlighter-rouge">TableOfContents</code>, we are going to pass as parameters the section and the callback for when a section is tapped. This callback contains the logic to scroll to the target widget. First, we verify that there is a widget with this key in the tree, by ensuring that the value of the <code class="language-plaintext highlighter-rouge">currentContext</code> is not null. And then, we will pass this context to <code class="language-plaintext highlighter-rouge">Scrollable.ensureVisible</code> to scroll to the target widget.</p> <p>For the <code class="language-plaintext highlighter-rouge">ListView</code>, we iterate over the sections and for each one, we create a new <code class="language-plaintext highlighter-rouge">SectionWidget</code> using the key from the section as the key for the widget.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ArticlePage</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Section</span><span class="o">&gt;</span> <span class="n">sections</span><span class="o">;</span>
  <span class="kd">const</span> <span class="n">ArticlePage</span><span class="o">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">,</span> <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">sections</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>

    <span class="kd">final</span> <span class="n">tableOfContents</span> <span class="o">=</span> <span class="n">TableOfContents</span><span class="o">(</span>
      <span class="nl">sections:</span> <span class="n">sections</span><span class="o">,</span>
      <span class="nl">onItemTap:</span> <span class="o">(</span><span class="n">section</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">targetContext</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="na">key</span><span class="o">.</span><span class="na">currentContext</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">targetContext</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">Scrollable</span><span class="o">.</span><span class="na">ensureVisible</span><span class="o">(</span>
            <span class="n">targetContext</span><span class="o">,</span>
            <span class="nl">duration:</span> <span class="kd">const</span> <span class="n">Duration</span><span class="o">(</span><span class="nl">milliseconds:</span> <span class="mi">400</span><span class="o">),</span>
            <span class="nl">curve:</span> <span class="n">Curves</span><span class="o">.</span><span class="na">easeInOut</span><span class="o">,</span>
          <span class="o">);</span>
        <span class="o">}</span>
      <span class="o">},</span>
    <span class="o">);</span>

    <span class="kd">final</span> <span class="n">listView</span> <span class="o">=</span> <span class="n">ListView</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span>
      <span class="nl">shrinkWrap:</span> <span class="kc">true</span><span class="o">,</span>
      <span class="nl">physics:</span> <span class="kd">const</span> <span class="n">NeverScrollableScrollPhysics</span><span class="o">(),</span>
      <span class="nl">itemCount:</span> <span class="n">sections</span><span class="o">.</span><span class="na">length</span><span class="o">,</span>
      <span class="nl">itemBuilder:</span> <span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">section</span> <span class="o">=</span> <span class="n">sections</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>

        <span class="k">return</span> <span class="n">SectionWidget</span><span class="o">(</span>
          <span class="nl">key:</span> <span class="n">section</span><span class="o">.</span><span class="na">key</span><span class="o">,</span>
          <span class="nl">section:</span> <span class="n">section</span><span class="o">,</span>
        <span class="o">);</span>
      <span class="o">},</span>
    <span class="o">);</span>

    <span class="k">return</span> <span class="n">Scaffold</span><span class="o">(</span>
      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="o">(</span>
        <span class="nl">title:</span> <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span><span class="s">'Home Screen'</span><span class="o">),</span>
      <span class="o">),</span>
      <span class="nl">body:</span> <span class="n">SafeArea</span><span class="o">(</span>
        <span class="nl">child:</span> <span class="n">SingleChildScrollView</span><span class="o">(</span>
          <span class="nl">child:</span> <span class="n">Padding</span><span class="o">(</span>
            <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mf">8.0</span><span class="o">),</span>
            <span class="nl">child:</span> <span class="n">Column</span><span class="o">(</span>
              <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">stretch</span><span class="o">,</span>
              <span class="nl">children:</span> <span class="o">[</span>
                <span class="n">tableOfContents</span><span class="o">,</span>
                <span class="n">listView</span><span class="o">,</span>
              <span class="o">],</span>
            <span class="o">),</span>
          <span class="o">),</span>
        <span class="o">),</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>If you now build and run the app, when you press on a link from the table of contents, you will have the same with the following video behavior.</p> <p><img src="https://diamantidis.github.io/assets/scrollable/scrollable_ensureVisible.gif" alt="Demo app gif" /></p> <blockquote> <p>You can also use <a href="https://dartpad.dev/?id=33c44d2f905cf23d4e0f825b45d79d91&amp;null_safety=true">dartpad.dev</a> to find and run the code of this post.</p> </blockquote> <h2 id="more-options">More options</h2> <p>Now that we have seen how we can use <code class="language-plaintext highlighter-rouge">Scrollable.ensureVisible</code>, let’s explore some more options that we can use to customize the transition to the target widget.</p> <p>Two of those, which we have seen before in the previous example, are <code class="language-plaintext highlighter-rouge">duration</code> and <code class="language-plaintext highlighter-rouge">curve</code>. <code class="language-plaintext highlighter-rouge">duration</code> can be used to set the desired duration that we want the animation from the link to the target widget to take.</p> <p>With the <code class="language-plaintext highlighter-rouge">curve</code> parameter, we can define the animation curve that the transition will follow. Basically, instead of making the transition at a constant rate, we can set a value to the <code class="language-plaintext highlighter-rouge">curve</code> parameter to change the animation over time, either by speeding it up or slowing it down at specific time frames. It can take values like <code class="language-plaintext highlighter-rouge">Curves.bounceInOut</code>, <code class="language-plaintext highlighter-rouge">Curves.easeInOut</code>, etc. For example, with <code class="language-plaintext highlighter-rouge">Curves.easeInOut</code> the animation will start slowly, then speed up and will then end slowly.</p> <blockquote> <p>Note: A visualization of the different options can be found on <a href="https://api.flutter.dev/flutter/animation/Curves-class.html">api.flutter.dev</a>.</p> </blockquote> <p>Another parameter of <code class="language-plaintext highlighter-rouge">Scrollable.ensureVisible</code> is <code class="language-plaintext highlighter-rouge">alignment</code>, and it can be used to set the position of the target widget. If the value is 0.0, the child will be positioned as close to the leading edge of the viewport, 0.5 as close to the center, and 1.0 as close to the trailing edge.</p> <p>Finally, the last parameter is <code class="language-plaintext highlighter-rouge">alignmentPolicy</code> and can be used to decide the policy when applying the <code class="language-plaintext highlighter-rouge">alignment</code> parameter. This parameter is of type <code class="language-plaintext highlighter-rouge">ScrollPositionAlignmentPolicy</code>, which is an enum with the following options: <code class="language-plaintext highlighter-rouge">explicit</code>, <code class="language-plaintext highlighter-rouge">keepVisibleAtEnd</code> or <code class="language-plaintext highlighter-rouge">keepVisibleAtStart</code>.</p> <p>When it is set to <code class="language-plaintext highlighter-rouge">explicit</code>, it will use the <code class="language-plaintext highlighter-rouge">alignment</code> property to decide where to align the target object. If it is set to <code class="language-plaintext highlighter-rouge">keepVisibleAtEnd</code>, it will make sure that the bottom of the target item is just visible if the bottom edge of the target item is below the bottom edge of the scroll container. Contrary, <code class="language-plaintext highlighter-rouge">keepVisibleAtStart</code>, will make sure that the top of the target object is just visible if the top edge of the target object is above the top edge of the scroll container</p> <h2 id="conclusion">Conclusion</h2> <p>And this is it! I hope that you find this post useful and it has given you some insights into how to use <code class="language-plaintext highlighter-rouge">Scrollable.ensureVisible</code> and all its options to scroll to a specific widget on a scroll view.</p> <p>If you have any questions or comments about this post, feel free to reach out to me on <a href="https://twitter.com/diamantidis_io">Twitter</a>!</p> <p>Until next time!</p> </div> <div class="socials"> <!-- Buy me a coffee button --> <a href="https://www.buymeacoffee.com/diamantidis" target="_blank"> <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" > </a> <div class="share"> <strong>Share: </strong> <a href="//twitter.com/share?text=Exploring+Flutter%27s+Scrollable.ensureVisible&url=https%3A%2F%2Fdiamantidis.github.io%2F2021%2F10%2F10%2Fexploring-flutter-scrollable-ensurevisible" aria-label="Share on Twitter" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.facebook.com/sharer.php?t=Exploring+Flutter%27s+Scrollable.ensureVisible&u=https%3A%2F%2Fdiamantidis.github.io%2F2021%2F10%2F10%2Fexploring-flutter-scrollable-ensurevisible" aria-label="Share on Facebook" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a> <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdiamantidis.github.io%2F2021%2F10%2F10%2Fexploring-flutter-scrollable-ensurevisible" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </div></article> </div> </main><footer class="site-footer"> <data class="u-url" href="/"></data> <div class="footer-icons"> <ul> <li> <div class="social-icon"> <a href="https://twitter.com/diamantidis_io" aria-label="Twitter"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://github.com/diamantidis" aria-label="GitHub"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="http://linkedin.com/in/ioannis-diamantidis" aria-label="LinkedIn"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="https://instagram.com/diama.codes" aria-label="Instagram"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-instagram fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="/feed.xml" aria-label="RSS Feed"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> <li> <div class="social-icon"> <a href="mailto:diamantidis@outlook.com" aria-label="Email"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-envelope fa-stack-1x fa-inverse"></i> </span> </a> </div> </li> </ul> </div> <div class="wrapper"> <p>Built with <i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a> </p> <p> © Copyright 2024 Ioannis Diamantidis </p> </div> </footer></body> </html>
